{"version":3,"sources":["webpack:///webpack/bootstrap d993ce7c8cdfe42a5abf","webpack:///./src/vector.js","webpack:///./src/key.js","webpack:///./src/thing.js","webpack:///./src/circle.js","webpack:///./src/index.js","webpack:///./src/game.js","webpack:///./src/game-scene.js","webpack:///./src/physics-scene.js","webpack:///./src/scene.js","webpack:///./src/player.js","webpack:///./src/node.js","webpack:///./src/get-id.js","webpack:///./src/colors.js"],"names":["Vector","x","y","other","scalar","sq","Math","sqrt","magSq","atan2","mag","h","heading","cos","sin","magnitude","lhs","rhs","clone","add","sub","mult","isKeyDown","keys","CONTROLLED_KEYS","onKeyDown","event","code","indexOf","preventDefault","onKeyUp","document","addEventListener","SHOW_VECTORS","Thing","mass","pos","vel","forces","color","force","step","PI","amount","constructor","name","remove","ctx","radius","strokeStyle","beginPath","moveTo","lineTo","stroke","circle","r","alpha","globalAlpha","fillStyle","arc","fill","init","canvas","getElementById","setAttribute","window","innerWidth","innerHeight","game","start","Game","context","getContext","width","height","update","bind","prevTimestamp","scene","requestAnimationFrame","timestamp","clearRect","draw","GameScene","player","addChild","i","thing","random","itemCount","items","length","ensureItemCount","renderLevel","title","target","GRAVITATIONAL_CONSTANT","PhysicsScene","applyGravity","wrapItems","checkCollisions","j","a","b","d","f","max","applyForce","fromAngle","onCollide","forEach","item","Scene","__isNode","setParent","push","child","index","splice","FORCE","INITIAL_COLOR","Player","scoreAngle","reset","addMass","score","renderScore","theta","offset","Node","id","parent","removeChild","getId","getColor","COLORS"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;IC7DqBA,M;AACnB,kBAAYC,CAAZ,EAAeC,CAAf,EAAkB;AAAA;;AAChB,SAAKD,CAAL,GAASA,CAAT;AACA,SAAKC,CAAL,GAASA,CAAT;AACD;;;;4BAqBO;AACN,aAAO,IAAIF,MAAJ,CAAW,KAAKC,CAAhB,EAAmB,KAAKC,CAAxB,CAAP;AACD;;;wBAEGC,K,EAAO;AACT,WAAKF,CAAL,IAAUE,MAAMF,CAAhB;AACA,WAAKC,CAAL,IAAUC,MAAMD,CAAhB;AACA,aAAO,IAAP;AACD;;;wBAEGC,K,EAAO;AACT,WAAKF,CAAL,IAAUE,MAAMF,CAAhB;AACA,WAAKC,CAAL,IAAUC,MAAMD,CAAhB;AACA,aAAO,IAAP;AACD;;;yBAEIE,M,EAAQ;AACX,WAAKH,CAAL,IAAUG,MAAV;AACA,WAAKF,CAAL,IAAUE,MAAV;AACA,aAAO,IAAP;AACD;;;4BAEO;AACN,UAAMC,KAAK,SAALA,EAAK;AAAA,eAAKJ,IAAIA,CAAT;AAAA,OAAX;AACA,aAAOI,GAAG,KAAKJ,CAAR,IAAaI,GAAG,KAAKH,CAAR,CAApB;AACD;;;0BAEK;AACJ,aAAOI,KAAKC,IAAL,CAAU,KAAKC,KAAL,EAAV,CAAP;AACD;;;8BAES;AACR,aAAOF,KAAKG,KAAL,CAAW,KAAKP,CAAhB,EAAmB,KAAKD,CAAxB,CAAP;AACD;;;0BAEKS,G,EAAK;AACT,UAAI,KAAKF,KAAL,KAAeE,MAAMA,GAAzB,EAA8B;AAC5B,YAAMC,IAAI,KAAKC,OAAL,EAAV;AACA,aAAKX,CAAL,GAASK,KAAKO,GAAL,CAASF,CAAT,IAAcD,GAAvB;AACA,aAAKR,CAAL,GAASI,KAAKQ,GAAL,CAASH,CAAT,IAAcD,GAAvB;AACD;AACD,aAAO,IAAP;AACD;;;8BA7DgBE,O,EAASG,S,EAAW;AACnC,aAAO,IAAIf,MAAJ,CACLM,KAAKO,GAAL,CAASD,OAAT,IAAoBG,SADf,EAELT,KAAKQ,GAAL,CAASF,OAAT,IAAoBG,SAFf,CAAP;AAID;;;wBAEUC,G,EAAKC,G,EAAK;AACnB,aAAOD,IAAIE,KAAJ,GAAYC,GAAZ,CAAgBF,GAAhB,CAAP;AACD;;;wBAEUD,G,EAAKC,G,EAAK;AACnB,aAAOD,IAAIE,KAAJ,GAAYE,GAAZ,CAAgBH,GAAhB,CAAP;AACD;;;yBAEWD,G,EAAKC,G,EAAK;AACpB,aAAOD,IAAIE,KAAJ,GAAYG,IAAZ,CAAiBJ,GAAjB,CAAP;AACD;;;;;;kBAvBkBjB,M;;;;;;;;;;;;QCuBLsB,S,GAAAA,S;AAvBhB,IAAMC,OAAO,EAAb;;AAEA,IAAMC,kBAAkB,CACtB,SADsB,EAEtB,YAFsB,EAGtB,WAHsB,EAItB,WAJsB,EAKtB,OALsB,CAAxB;;AAQA,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;AACxBH,OAAKG,MAAMC,IAAX,IAAmB,IAAnB;AACA,MAAIH,gBAAgBI,OAAhB,CAAwBF,MAAMC,IAA9B,MAAwC,CAAC,CAA7C,EAAgDD,MAAMG,cAAN;AACjD;;AAED,SAASC,OAAT,CAAiBJ,KAAjB,EAAwB;AACtBH,OAAKG,MAAMC,IAAX,IAAmB,KAAnB;AACAD,QAAMG,cAAN;AACD;;AAEDE,SAASC,gBAAT,CAA0B,SAA1B,EAAqCP,SAArC;AACAM,SAASC,gBAAT,CAA0B,OAA1B,EAAmCF,OAAnC;;AAEO,SAASR,SAAT,CAAmBK,IAAnB,EAAyB;AAC9B,SAAO,CAAC,CAACJ,KAAKI,IAAL,CAAT;AACD,C;;;;;;;;;;;;;;;ACzBD;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA,IAAMM,eAAe,KAArB;;IAEqBC,K;;;AACnB,iBAAYjC,CAAZ,EAAeC,CAAf,EAAkBiC,IAAlB,EAAwB;AAAA;;AAAA;;AAGtB,UAAKC,GAAL,GAAW,qBAAWnC,CAAX,EAAcC,CAAd,CAAX;AACA,UAAKmC,GAAL,GAAW,qBAAW,CAAX,EAAc,CAAd,CAAX;AACA,UAAKC,MAAL,GAAc,qBAAW,CAAX,EAAc,CAAd,CAAd;AACA,UAAKH,IAAL,GAAYA,IAAZ;AACA,UAAKI,KAAL,GAAa,uBAAb;AAPsB;AAQvB;;;;+BAEUC,K,EAAO;AAChB,WAAKF,MAAL,CAAYnB,GAAZ,CAAgBqB,MAAMnB,IAAN,CAAW,IAAI,KAAKc,IAApB,CAAhB;AACD;;;2BAEMM,I,EAAM;AACX,WAAKJ,GAAL,CAASlB,GAAT,CAAa,iBAAOE,IAAP,CAAY,KAAKiB,MAAjB,EAAyBG,IAAzB,CAAb;AACA,WAAKL,GAAL,CAASjB,GAAT,CAAa,iBAAOE,IAAP,CAAY,KAAKgB,GAAjB,EAAsBI,IAAtB,CAAb;AACD;;;6BAEQ;AACP,aAAOnC,KAAKC,IAAL,CAAU,KAAK4B,IAAL,GAAY,GAAZ,GAAkB7B,KAAKoC,EAAjC,CAAP;AACD;;;4BAEOC,M,EAAQ;AACd,WAAKR,IAAL,IAAaQ,MAAb;AACD;;;8BAESxC,K,EAAO;AACf,UAAIA,MAAMyC,WAAN,CAAkBC,IAAlB,KAA2B,QAA/B,EAAyC;AACvC,aAAKC,MAAL;AACD;AACF;;;yBAEIC,G,EAAK;AACR,4BAAOA,GAAP,EAAY,KAAKX,GAAL,CAASnC,CAArB,EAAwB,KAAKmC,GAAL,CAASlC,CAAjC,EAAoC,KAAK8C,MAAL,EAApC,EAAmD,KAAKT,KAAxD;;AAEA,UAAIN,YAAJ,EAAkB;AAChBc,YAAIE,WAAJ,GAAkB,MAAlB;AACAF,YAAIG,SAAJ;AACAH,YAAII,MAAJ,CAAW,KAAKf,GAAL,CAASnC,CAApB,EAAuB,KAAKmC,GAAL,CAASlC,CAAhC;AACA6C,YAAIK,MAAJ,CAAW,KAAKhB,GAAL,CAASnC,CAAT,GAAa,KAAKoC,GAAL,CAASpC,CAAT,GAAa,EAArC,EAAyC,KAAKmC,GAAL,CAASlC,CAAT,GAAa,KAAKmC,GAAL,CAASnC,CAAT,GAAa,EAAnE;AACA6C,YAAIM,MAAJ;;AAEAN,YAAIE,WAAJ,GAAkB,MAAlB;AACAF,YAAIG,SAAJ;AACAH,YAAII,MAAJ,CAAW,KAAKf,GAAL,CAASnC,CAApB,EAAuB,KAAKmC,GAAL,CAASlC,CAAhC;AACA6C,YAAIK,MAAJ,CACE,KAAKhB,GAAL,CAASnC,CAAT,GAAa,KAAKqC,MAAL,CAAYrC,CAAZ,GAAgB,GAD/B,EAEE,KAAKmC,GAAL,CAASlC,CAAT,GAAa,KAAKoC,MAAL,CAAYpC,CAAZ,GAAgB,GAF/B;AAIA6C,YAAIM,MAAJ;AACD;;AAED,WAAKf,MAAL,CAAYrC,CAAZ,GAAgB,CAAhB;AACA,WAAKqC,MAAL,CAAYpC,CAAZ,GAAgB,CAAhB;AACD;;;;;;kBAxDkBgC,K;;;;;;;;;;;;kBCPGoB,M;AAAT,SAASA,MAAT,CAAgBP,GAAhB,EAAqB9C,CAArB,EAAwBC,CAAxB,EAA2BqD,CAA3B,EAA8BhB,KAA9B,EAAgE;AAAA,MAA3BiB,KAA2B,uEAAnB,CAAmB;AAAA,MAAhBH,MAAgB,uEAAP,KAAO;;AAC7EN,MAAIU,WAAJ,GAAkBD,KAAlB;;AAEA,MAAIH,MAAJ,EAAY;AACVN,QAAIE,WAAJ,GAAkBV,KAAlB;AACD,GAFD,MAEO;AACLQ,QAAIW,SAAJ,GAAgBnB,KAAhB;AACD;;AAEDQ,MAAIG,SAAJ;AACAH,MAAIY,GAAJ,CAAQ1D,CAAR,EAAWC,CAAX,EAAcqD,CAAd,EAAiB,CAAjB,EAAoB,IAAIjD,KAAKoC,EAA7B;;AAEA,MAAIW,MAAJ,EAAY;AACVN,QAAIM,MAAJ;AACD,GAFD,MAEO;AACLN,QAAIa,IAAJ;AACD;;AAEDb,MAAIU,WAAJ,GAAkB,CAAlB;AACD,C;;;;;;;;;;;;;;;;ACnBD;;;;;;AAEA,SAASI,IAAT,GAAgB;AACd,MAAMC,SAAS/B,SAASgC,cAAT,CAAwB,QAAxB,CAAf;AACAD,SAAOE,YAAP,CAAoB,OAApB,EAA6BC,OAAOC,UAApC;AACAJ,SAAOE,YAAP,CAAoB,QAApB,EAA8BC,OAAOE,WAArC;;AAEA,MAAMC,OAAO,mBAASN,MAAT,CAAb;AACAM,OAAKC,KAAL;AACD;;AAEDR,O;;;;;;;;;;;;;;;ACXA;;;;;;;;IAEqBS,I;AACnB,gBAAYR,MAAZ,EAAoB;AAAA;;AAClB,SAAKS,OAAL,GAAeT,OAAOU,UAAP,CAAkB,IAAlB,CAAf;AACA,SAAKC,KAAL,GAAaX,OAAOW,KAApB;AACA,SAAKC,MAAL,GAAcZ,OAAOY,MAArB;AACA,SAAKC,MAAL,GAAc,KAAKA,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAKC,aAAL,GAAqB,IAArB;;AAEA,SAAKC,KAAL,GAAa,wBAAc,KAAKL,KAAnB,EAA0B,KAAKC,MAA/B,CAAb;AACD;;;;4BAEO;AACNT,aAAOc,qBAAP,CAA6B,KAAKJ,MAAlC;AACD;;;2BAEMK,S,EAAW;AAChB,UAAMjC,MAAM,KAAKwB,OAAjB;AACAxB,UAAIkC,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB,KAAKR,KAAzB,EAAgC,KAAKC,MAArC;;AAEA,UAAI,KAAKG,aAAL,KAAuB,IAA3B,EAAiC;AAC/B,YAAMpC,OAAOuC,YAAY,KAAKH,aAA9B;;AAEA,aAAKC,KAAL,CAAWH,MAAX,CAAkBlC,OAAO,EAAP,GAAY,IAA9B;AACA,aAAKqC,KAAL,CAAWI,IAAX,CAAgBnC,GAAhB;AACD;;AAED,WAAK8B,aAAL,GAAqBG,SAArB;AACAf,aAAOc,qBAAP,CAA6B,KAAKJ,MAAlC;AACD;;;;;;kBA5BkBL,I;;;;;;;;;;;;;;;;;ACFrB;;;;AACA;;;;AACA;;;;;;;;;;;;IAEqBa,S;;;AACnB,qBAAYV,KAAZ,EAAmBC,MAAnB,EAA2B;AAAA;;AAAA,sHACnBD,KADmB,EACZC,MADY;;AAGzB,UAAKU,MAAL,GAAc,qBAAW,MAAKX,KAAL,GAAa,CAAxB,EAA2B,MAAKC,MAAL,GAAc,CAAzC,CAAd;AACA,UAAKW,QAAL,CAAc,MAAKD,MAAnB;;AAEA,SAAK,IAAIE,IAAI,CAAb,EAAgBA,IAAI,EAApB,EAAwBA,GAAxB,EAA6B;AAC3B,UAAMC,QAAQ,oBACZjF,KAAKkF,MAAL,KAAgB,MAAKf,KADT,EAEZnE,KAAKkF,MAAL,KAAgB,MAAKd,MAFT,EAGZ,GAHY,CAAd;AAKA,YAAKW,QAAL,CAAcE,KAAd;AACD;;AAED,UAAKE,SAAL,GAAiB,MAAKC,KAAL,CAAWC,MAA5B;AAfyB;AAgB1B;;;;2BAEMlD,I,EAAM;AACX,mHAAaA,IAAb;AACA,WAAKmD,eAAL;AACA,WAAKC,WAAL;AACD;;;sCAEiB;AAChB,UAAI,KAAKH,KAAL,CAAWC,MAAX,GAAoB,KAAKF,SAA7B,EAAwC;AACtC,YAAMF,QAAQ,oBACZjF,KAAKkF,MAAL,KAAgB,KAAKf,KADT,EAEZnE,KAAKkF,MAAL,KAAgB,KAAKd,MAFT,EAGZ,GAHY,CAAd;;AAMA,aAAKW,QAAL,CAAcE,KAAd;AACD;AACF;;;kCAEa;AACZxD,eAAS+D,KAAT,aAAwB,KAAKV,MAAL,CAAYW,MAAZ,GAAqB,CAA7C;AACD;;;;;;kBAvCkBZ,S;;;;;;;;;;;;;;;;;ACHrB;;;;AACA;;;;AACA;;;;;;;;;;AAHA,IAAMa,yBAAyB,GAA/B;;IAKqBC,Y;;;;;;;;;;;2BACZxD,I,EAAM;AACX,WAAKyD,YAAL;;AAEA,yHAAazD,IAAb;;AAEA,WAAK0D,SAAL;AACA,WAAKC,eAAL;AACD;;;mCAEc;AACb,WAAK,IAAId,IAAI,CAAb,EAAgBA,IAAI,KAAKI,KAAL,CAAWC,MAAX,GAAoB,CAAxC,EAA2CL,GAA3C,EAAgD;AAC9C,aAAK,IAAIe,IAAIf,IAAI,CAAjB,EAAoBe,IAAI,KAAKX,KAAL,CAAWC,MAAnC,EAA2CU,GAA3C,EAAgD;AAC9C,cAAMC,IAAI,KAAKZ,KAAL,CAAWJ,CAAX,CAAV;AACA,cAAMiB,IAAI,KAAKb,KAAL,CAAWW,CAAX,CAAV;;AAEA,cAAMG,IAAI,iBAAOpF,GAAP,CAAWkF,EAAElE,GAAb,EAAkBmE,EAAEnE,GAApB,CAAV;AACA,cAAIqE,IACFT,yBAAyBM,EAAEnE,IAA3B,GAAkCoE,EAAEpE,IAApC,GAA2C7B,KAAKoG,GAAL,CAASF,EAAEhG,KAAF,EAAT,EAAoB,GAApB,CAD7C;;AAGA,cAAI,oBAAU,OAAV,CAAJ,EAAwBiG,KAAK,CAAC,CAAN;AACxBH,YAAEK,UAAF,CAAa,iBAAOC,SAAP,CAAiBJ,EAAE5F,OAAF,EAAjB,EAA8B,CAAC6F,CAA/B,CAAb;AACAF,YAAEI,UAAF,CAAa,iBAAOC,SAAP,CAAiBJ,EAAE5F,OAAF,EAAjB,EAA8B6F,CAA9B,CAAb;AACD;AACF;AACF;;;sCAEiB;AAChB,WAAK,IAAInB,IAAI,CAAb,EAAgBA,IAAI,KAAKI,KAAL,CAAWC,MAAX,GAAoB,CAAxC,EAA2CL,GAA3C,EAAgD;AAC9C,aAAK,IAAIe,IAAIf,IAAI,CAAjB,EAAoBe,IAAI,KAAKX,KAAL,CAAWC,MAAnC,EAA2CU,GAA3C,EAAgD;AAC9C,cAAMC,IAAI,KAAKZ,KAAL,CAAWJ,CAAX,CAAV;AACA,cAAMiB,IAAI,KAAKb,KAAL,CAAWW,CAAX,CAAV;AACA,cAAMG,IAAI,iBAAOpF,GAAP,CAAWkF,EAAElE,GAAb,EAAkBmE,EAAEnE,GAApB,EAAyB5B,KAAzB,EAAV;AACA,cAAMH,KAAK,SAALA,EAAK;AAAA,mBAAKJ,IAAIA,CAAT;AAAA,WAAX;AACA,cAAIuG,IAAInG,GAAGiG,EAAEtD,MAAF,KAAauD,EAAEvD,MAAF,EAAhB,CAAR,EAAqC;AACnCsD,cAAEO,SAAF,CAAYN,CAAZ;AACAA,cAAEM,SAAF,CAAYP,CAAZ;AACD;AACF;AACF;AACF;;;gCAEW;AAAA;;AACV,WAAKZ,KAAL,CAAWoB,OAAX,CAAmB,gBAAQ;AAAA,wBACRC,KAAK3E,GADG;AAAA,YACjBnC,CADiB,aACjBA,CADiB;AAAA,YACdC,CADc,aACdA,CADc;;AAEzB,YAAID,IAAI,CAAR,EAAW8G,KAAK3E,GAAL,CAASnC,CAAT,IAAc,OAAKwE,KAAnB;AACX,YAAIvE,IAAI,CAAR,EAAW6G,KAAK3E,GAAL,CAASlC,CAAT,IAAc,OAAKwE,MAAnB;AACX,YAAIzE,IAAI,OAAKwE,KAAb,EAAoBsC,KAAK3E,GAAL,CAASnC,CAAT,IAAc,OAAKwE,KAAnB;AACpB,YAAIvE,IAAI,OAAKwE,MAAb,EAAqBqC,KAAK3E,GAAL,CAASlC,CAAT,IAAc,OAAKwE,MAAnB;AACtB,OAND;AAOD;;;;;;kBAlDkBuB,Y;;;;;;;;;;;;;;;;;ICLAe,K;AACnB,iBAAYvC,KAAZ,EAAmBC,MAAnB,EAA2B;AAAA;;AACzB,SAAKgB,KAAL,GAAa,EAAb;AACA,SAAKjB,KAAL,GAAaA,KAAb;AACA,SAAKC,MAAL,GAAcA,MAAd;AACD;;;;6BAEQqC,I,EAAM;AACb,UAAIA,KAAKE,QAAT,EAAmB;AACjBF,aAAKG,SAAL,CAAe,IAAf;AACA,aAAKxB,KAAL,CAAWyB,IAAX,CAAgBJ,IAAhB;AACD;AACF;;;gCAEWK,K,EAAO;AACjB,UAAMC,QAAQ,KAAK3B,KAAL,CAAW9D,OAAX,CAAmBwF,KAAnB,CAAd;AACA,UAAIC,QAAQ,CAAC,CAAb,EAAgB,KAAK3B,KAAL,CAAW4B,MAAX,CAAkBD,KAAlB,EAAyB,CAAzB;AACjB;;;2BAEM5E,I,EAAM;AACX,WAAKiD,KAAL,CAAWoB,OAAX,CAAmB;AAAA,eAAKxB,EAAEX,MAAF,CAASlC,IAAT,CAAL;AAAA,OAAnB;AACD;;;yBAEIM,G,EAAK;AACR,WAAK2C,KAAL,CAAWoB,OAAX,CAAmB;AAAA,eAAKxB,EAAEJ,IAAF,CAAOnC,GAAP,CAAL;AAAA,OAAnB;AACD;;;;;;kBAzBkBiE,K;;;;;;;;;;;;;;;;;ACArB;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;AAEA,IAAMO,QAAQ,GAAd;AACA,IAAMC,gBAAgB,MAAtB;;IAEqBC,M;;;AACnB,kBAAYxH,CAAZ,EAAeC,CAAf,EAAkB;AAAA;;AAAA,gHACVD,CADU,EACPC,CADO,EACJ,CADI;;AAEhB,UAAKqC,KAAL,GAAaiF,aAAb;;AAEA,UAAKzB,MAAL,GAAc,CAAd;AACA,UAAKL,KAAL,GAAa,CAAb;;AAEA,UAAKgC,UAAL,GAAkB,CAAlB;AAPgB;AAQjB;;;;2BAEMjF,I,EAAM;AACX,UAAI,oBAAU,YAAV,CAAJ,EAA6B,KAAKkE,UAAL,CAAgB,qBAAWY,KAAX,EAAkB,CAAlB,CAAhB;AAC7B,UAAI,oBAAU,WAAV,CAAJ,EAA4B,KAAKZ,UAAL,CAAgB,qBAAW,CAACY,KAAZ,EAAmB,CAAnB,CAAhB;AAC5B,UAAI,oBAAU,WAAV,CAAJ,EAA4B,KAAKZ,UAAL,CAAgB,qBAAW,CAAX,EAAcY,KAAd,CAAhB;AAC5B,UAAI,oBAAU,SAAV,CAAJ,EAA0B,KAAKZ,UAAL,CAAgB,qBAAW,CAAX,EAAc,CAACY,KAAf,CAAhB;;AAE1B,6GAAa9E,IAAb;AACA,WAAKiF,UAAL,IAAmBjF,OAAO,KAAKJ,GAAL,CAASpC,CAAhB,GAAoB,GAAvC;AACD;;;4BAEO;AACN,WAAKyF,KAAL;AACA,UAAI,KAAKA,KAAL,IAAc,KAAKK,MAAvB,EAA+B;AAC7B,aAAKA,MAAL;AACA,aAAK4B,KAAL;AACD;AACF;;;4BAEO;AACN,WAAKjC,KAAL,GAAa,CAAb;AACA,WAAKvD,IAAL,GAAY,CAAZ;AACA,WAAKI,KAAL,GAAaiF,aAAb;AACD;;;8BAESrH,K,EAAO;AACf,UAAIA,MAAMyC,WAAN,CAAkBC,IAAlB,KAA2B,OAA/B,EAAwC;AACtC,YAAI1C,MAAMoC,KAAN,KAAgB,KAAKA,KAAzB,EAAgC;AAC9B,eAAKqF,OAAL,CAAazH,MAAMgC,IAAnB;AACA,eAAK0F,KAAL;AACD,SAHD,MAGO;AACL,eAAKF,KAAL;AACA,eAAKpF,KAAL,GAAapC,MAAMoC,KAAnB;AACA,eAAKJ,IAAL,GAAY,IAAIhC,MAAMgC,IAAtB;AACA,eAAK0F,KAAL;AACD;AACF;AACF;;;yBAEI9E,G,EAAK;AACR,2GAAWA,GAAX;AACA,WAAK+E,WAAL,CAAiB/E,GAAjB;AACD;;;gCAEWA,G,EAAK;AACf,WAAK,IAAIuC,IAAI,CAAb,EAAgBA,IAAI,KAAKS,MAAzB,EAAiCT,GAAjC,EAAsC;AACpC,YAAMyC,QAAQzH,KAAKoC,EAAL,GAAU,CAAV,GAAc,KAAKqD,MAAnB,GAA4BT,CAA5B,GAAgC,KAAKoC,UAAnD;AACA,YAAMM,SAAS,KAAKhF,MAAL,KAAgB,EAA/B;AACA,YAAMZ,MAAM,iBAAOjB,GAAP,CAAW,KAAKiB,GAAhB,EAAqB,iBAAOwE,SAAP,CAAiBmB,KAAjB,EAAwBC,MAAxB,CAArB,CAAZ;;AAEA,8BACEjF,GADF,EAEEX,IAAInC,CAFN,EAGEmC,IAAIlC,CAHN,EAIE,CAJF,EAKE,KAAKqC,KALP,EAME+C,KAAK,KAAKI,KAAV,GAAkB,GAAlB,GAAwB,CAN1B,EAOEJ,KAAK,KAAKI,KAPZ;AASD;AACF;;;;;;kBAtEkB+B,M;;;;;;;;;;;;;;;ACRrB;;;;;;;;IAEqBQ,I;AACnB,kBAAc;AAAA;;AACZ,SAAKhB,QAAL,GAAgB,IAAhB;AACA,SAAKiB,EAAL,GAAU,sBAAV;AACA,SAAKC,MAAL,GAAc,IAAd;AACD;;;;8BAESA,M,EAAQ;AAChB,WAAKA,MAAL,GAAcA,MAAd;AACD;;;6BAEQ;AACP,WAAKA,MAAL,CAAYC,WAAZ,CAAwB,IAAxB;AACD;;;6BAEQ,CAAE;;;2BAEJ,CAAE;;;;;;kBAjBUH,I;;;;;;;;;;;;kBCAGI,K;AAFxB,IAAIH,KAAK,CAAT;;AAEe,SAASG,KAAT,GAAiB;AAC9B,SAAOH,IAAP;AACD,C;;;;;;;;;;;;kBCFuBI,Q;AAFxB,IAAMC,SAAS,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,CAAf;;AAEe,SAASD,QAAT,GAAoB;AACjC,SAAOC,OAAO,CAAC,EAAEjI,KAAKkF,MAAL,KAAgB+C,OAAO5C,MAAzB,CAAR,CAAP;AACD,C","file":"main.2855a787bd5eae70f290.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d993ce7c8cdfe42a5abf","export default class Vector {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  static fromAngle(heading, magnitude) {\n    return new Vector(\n      Math.cos(heading) * magnitude,\n      Math.sin(heading) * magnitude\n    );\n  }\n\n  static add(lhs, rhs) {\n    return lhs.clone().add(rhs);\n  }\n\n  static sub(lhs, rhs) {\n    return lhs.clone().sub(rhs);\n  }\n\n  static mult(lhs, rhs) {\n    return lhs.clone().mult(rhs);\n  }\n\n  clone() {\n    return new Vector(this.x, this.y);\n  }\n\n  add(other) {\n    this.x += other.x;\n    this.y += other.y;\n    return this;\n  }\n\n  sub(other) {\n    this.x -= other.x;\n    this.y -= other.y;\n    return this;\n  }\n\n  mult(scalar) {\n    this.x *= scalar;\n    this.y *= scalar;\n    return this;\n  }\n\n  magSq() {\n    const sq = x => x * x;\n    return sq(this.x) + sq(this.y);\n  }\n\n  mag() {\n    return Math.sqrt(this.magSq());\n  }\n\n  heading() {\n    return Math.atan2(this.y, this.x);\n  }\n\n  limit(mag) {\n    if (this.magSq() > mag * mag) {\n      const h = this.heading();\n      this.x = Math.cos(h) * mag;\n      this.y = Math.sin(h) * mag;\n    }\n    return this;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/vector.js","const keys = {};\n\nconst CONTROLLED_KEYS = [\n  'ArrowUp',\n  'ArrowRight',\n  'ArrowDown',\n  'ArrowLeft',\n  'Space'\n];\n\nfunction onKeyDown(event) {\n  keys[event.code] = true;\n  if (CONTROLLED_KEYS.indexOf(event.code) !== -1) event.preventDefault();\n}\n\nfunction onKeyUp(event) {\n  keys[event.code] = false;\n  event.preventDefault();\n}\n\ndocument.addEventListener('keydown', onKeyDown);\ndocument.addEventListener('keyup', onKeyUp);\n\nexport function isKeyDown(code) {\n  return !!keys[code];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/key.js","import Vector from './vector';\nimport Node from './node';\nimport circle from './circle';\nimport getColor from './colors';\n\nconst SHOW_VECTORS = false;\n\nexport default class Thing extends Node {\n  constructor(x, y, mass) {\n    super();\n\n    this.pos = new Vector(x, y);\n    this.vel = new Vector(0, 0);\n    this.forces = new Vector(0, 0);\n    this.mass = mass;\n    this.color = getColor();\n  }\n\n  applyForce(force) {\n    this.forces.add(force.mult(1 / this.mass));\n  }\n\n  update(step) {\n    this.vel.add(Vector.mult(this.forces, step));\n    this.pos.add(Vector.mult(this.vel, step));\n  }\n\n  radius() {\n    return Math.sqrt(this.mass * 900 / Math.PI);\n  }\n\n  addMass(amount) {\n    this.mass += amount;\n  }\n\n  onCollide(other) {\n    if (other.constructor.name === 'Player') {\n      this.remove();\n    }\n  }\n\n  draw(ctx) {\n    circle(ctx, this.pos.x, this.pos.y, this.radius(), this.color);\n\n    if (SHOW_VECTORS) {\n      ctx.strokeStyle = '#0f0';\n      ctx.beginPath();\n      ctx.moveTo(this.pos.x, this.pos.y);\n      ctx.lineTo(this.pos.x + this.vel.x * 10, this.pos.y + this.vel.y * 10);\n      ctx.stroke();\n\n      ctx.strokeStyle = '#f00';\n      ctx.beginPath();\n      ctx.moveTo(this.pos.x, this.pos.y);\n      ctx.lineTo(\n        this.pos.x + this.forces.x * 100,\n        this.pos.y + this.forces.y * 100\n      );\n      ctx.stroke();\n    }\n\n    this.forces.x = 0;\n    this.forces.y = 0;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/thing.js","export default function circle(ctx, x, y, r, color, alpha = 1, stroke = false) {\n  ctx.globalAlpha = alpha;\n\n  if (stroke) {\n    ctx.strokeStyle = color;\n  } else {\n    ctx.fillStyle = color;\n  }\n\n  ctx.beginPath();\n  ctx.arc(x, y, r, 0, 2 * Math.PI);\n\n  if (stroke) {\n    ctx.stroke();\n  } else {\n    ctx.fill();\n  }\n\n  ctx.globalAlpha = 1;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/circle.js","import Game from './game';\n\nfunction init() {\n  const canvas = document.getElementById('canvas');\n  canvas.setAttribute('width', window.innerWidth);\n  canvas.setAttribute('height', window.innerHeight);\n\n  const game = new Game(canvas);\n  game.start();\n}\n\ninit();\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import GameScene from './game-scene';\n\nexport default class Game {\n  constructor(canvas) {\n    this.context = canvas.getContext('2d');\n    this.width = canvas.width;\n    this.height = canvas.height;\n    this.update = this.update.bind(this);\n    this.prevTimestamp = null;\n\n    this.scene = new GameScene(this.width, this.height);\n  }\n\n  start() {\n    window.requestAnimationFrame(this.update);\n  }\n\n  update(timestamp) {\n    const ctx = this.context;\n    ctx.clearRect(0, 0, this.width, this.height);\n\n    if (this.prevTimestamp !== null) {\n      const step = timestamp - this.prevTimestamp;\n\n      this.scene.update(step * 60 / 1000);\n      this.scene.draw(ctx);\n    }\n\n    this.prevTimestamp = timestamp;\n    window.requestAnimationFrame(this.update);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/game.js","import PhysicsScene from './physics-scene';\nimport Player from './player';\nimport Thing from './thing';\n\nexport default class GameScene extends PhysicsScene {\n  constructor(width, height) {\n    super(width, height);\n\n    this.player = new Player(this.width / 2, this.height / 2);\n    this.addChild(this.player);\n\n    for (let i = 0; i < 10; i++) {\n      const thing = new Thing(\n        Math.random() * this.width,\n        Math.random() * this.height,\n        0.5\n      );\n      this.addChild(thing);\n    }\n\n    this.itemCount = this.items.length;\n  }\n\n  update(step) {\n    super.update(step);\n    this.ensureItemCount();\n    this.renderLevel();\n  }\n\n  ensureItemCount() {\n    if (this.items.length < this.itemCount) {\n      const thing = new Thing(\n        Math.random() * this.width,\n        Math.random() * this.height,\n        0.5\n      );\n\n      this.addChild(thing);\n    }\n  }\n\n  renderLevel() {\n    document.title = `lvl ${this.player.target - 2}`;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/game-scene.js","const GRAVITATIONAL_CONSTANT = 100;\nimport Vector from './vector';\nimport Scene from './scene';\nimport { isKeyDown } from './key';\n\nexport default class PhysicsScene extends Scene {\n  update(step) {\n    this.applyGravity();\n\n    super.update(step);\n\n    this.wrapItems();\n    this.checkCollisions();\n  }\n\n  applyGravity() {\n    for (let i = 0; i < this.items.length - 1; i++) {\n      for (let j = i + 1; j < this.items.length; j++) {\n        const a = this.items[i];\n        const b = this.items[j];\n\n        const d = Vector.sub(a.pos, b.pos);\n        let f =\n          GRAVITATIONAL_CONSTANT * a.mass * b.mass / Math.max(d.magSq(), 100);\n\n        if (isKeyDown('Space')) f *= -1;\n        a.applyForce(Vector.fromAngle(d.heading(), -f));\n        b.applyForce(Vector.fromAngle(d.heading(), f));\n      }\n    }\n  }\n\n  checkCollisions() {\n    for (let i = 0; i < this.items.length - 1; i++) {\n      for (let j = i + 1; j < this.items.length; j++) {\n        const a = this.items[i];\n        const b = this.items[j];\n        const d = Vector.sub(a.pos, b.pos).magSq();\n        const sq = x => x * x;\n        if (d < sq(a.radius() + b.radius())) {\n          a.onCollide(b);\n          b.onCollide(a);\n        }\n      }\n    }\n  }\n\n  wrapItems() {\n    this.items.forEach(item => {\n      const { x, y } = item.pos;\n      if (x < 0) item.pos.x += this.width;\n      if (y < 0) item.pos.y += this.height;\n      if (x > this.width) item.pos.x -= this.width;\n      if (y > this.height) item.pos.y -= this.height;\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/physics-scene.js","export default class Scene {\n  constructor(width, height) {\n    this.items = [];\n    this.width = width;\n    this.height = height;\n  }\n\n  addChild(item) {\n    if (item.__isNode) {\n      item.setParent(this);\n      this.items.push(item);\n    }\n  }\n\n  removeChild(child) {\n    const index = this.items.indexOf(child);\n    if (index > -1) this.items.splice(index, 1);\n  }\n\n  update(step) {\n    this.items.forEach(i => i.update(step));\n  }\n\n  draw(ctx) {\n    this.items.forEach(i => i.draw(ctx));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scene.js","import Thing from './thing';\nimport Vector from './vector';\nimport circle from './circle';\nimport { isKeyDown } from './key';\n\nconst FORCE = 0.1;\nconst INITIAL_COLOR = '#fff';\n\nexport default class Player extends Thing {\n  constructor(x, y) {\n    super(x, y, 1);\n    this.color = INITIAL_COLOR;\n\n    this.target = 3;\n    this.items = 0;\n\n    this.scoreAngle = 0;\n  }\n\n  update(step) {\n    if (isKeyDown('ArrowRight')) this.applyForce(new Vector(FORCE, 0));\n    if (isKeyDown('ArrowLeft')) this.applyForce(new Vector(-FORCE, 0));\n    if (isKeyDown('ArrowDown')) this.applyForce(new Vector(0, FORCE));\n    if (isKeyDown('ArrowUp')) this.applyForce(new Vector(0, -FORCE));\n\n    super.update(step);\n    this.scoreAngle += step * this.vel.x / 100;\n  }\n\n  score() {\n    this.items++;\n    if (this.items >= this.target) {\n      this.target++;\n      this.reset();\n    }\n  }\n\n  reset() {\n    this.items = 0;\n    this.mass = 1;\n    this.color = INITIAL_COLOR;\n  }\n\n  onCollide(other) {\n    if (other.constructor.name === 'Thing') {\n      if (other.color === this.color) {\n        this.addMass(other.mass);\n        this.score();\n      } else {\n        this.reset();\n        this.color = other.color;\n        this.mass = 1 + other.mass;\n        this.score();\n      }\n    }\n  }\n\n  draw(ctx) {\n    super.draw(ctx);\n    this.renderScore(ctx);\n  }\n\n  renderScore(ctx) {\n    for (let i = 0; i < this.target; i++) {\n      const theta = Math.PI * 2 / this.target * i + this.scoreAngle;\n      const offset = this.radius() + 20;\n      const pos = Vector.add(this.pos, Vector.fromAngle(theta, offset));\n\n      circle(\n        ctx,\n        pos.x,\n        pos.y,\n        5,\n        this.color,\n        i >= this.items ? 0.3 : 1,\n        i >= this.items\n      );\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/player.js","import getId from './get-id';\n\nexport default class Node {\n  constructor() {\n    this.__isNode = true;\n    this.id = getId();\n    this.parent = null;\n  }\n\n  setParent(parent) {\n    this.parent = parent;\n  }\n\n  remove() {\n    this.parent.removeChild(this);\n  }\n\n  update() {}\n\n  draw() {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/node.js","let id = 0;\n\nexport default function getId() {\n  return id++;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/get-id.js","const COLORS = ['#ffff00', '#00ffff', '#ff00ff'];\n\nexport default function getColor() {\n  return COLORS[~~(Math.random() * COLORS.length)];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/colors.js"],"sourceRoot":""}